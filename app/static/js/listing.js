// jQuery
const jsonStr = $("#varContainer").data("listing").replace(/\'/g, '"');
const listing = JSON.parse(jsonStr);

const { guests = 1, bedrooms = 1, beds = 1, baths = 1, lat = 51.5136, lng = 23.3219, address = 'SOHO', landmarks = [], events = [], rating = 5 } = listing;


// rating
const starPercentage = (rating / 5) * 100;
const starPercentageRounded = `${(Math.round(starPercentage / 10) * 10)}%`;
const ratingElement = document.getElementById('rating');
ratingElement.style.width = starPercentageRounded;

// radar chart
const color = 'rgb(153, 102, 255)';
const colorWithAlpha = 'rgba(153, 102, 255, 0.2)';
const labels = ['🧙🏻‍♂️ Guests', '🛏 Bedrooms', '🛌 Beds', '🛀🏻 Baths'];
const datasetData = [guests, bedrooms, beds, baths];
const data = {
  labels,
  datasets: [{
    backgroundColor: colorWithAlpha,
    borderColor: color,
    pointBackgroundColor: color,
    data: datasetData
  }],
};

const radarChartElement = document.getElementById('radarChart');
const radarChart = new Chart(radarChartElement, {
  type: 'radar',
  data,
  options: {
    scale: {
      pointLabels: {
        fontSize: 20,
      },
      ticks: {
        beginAtZero: true,
        stepSize: 1,
        max: Math.max(...datasetData) + 1,
      },
    },
    legend: {
      display: false,
    },
  }
});

// calendar
const checkIfDateIsUnavailable = (date) => {
  for (let event of events) {
    const eventDate = event.date;
    if (eventDate.year === date.year && eventDate.month === date.month && eventDate.day === date.day) {
      return true;
    }
  }

  return false;
};

$('#calendar').daterangepicker({
  isInvalidDate: (date) => {
    var year = date._d.getUTCFullYear();
    var month = date._d.getUTCMonth() + 1;
    var day = date._d.getUTCDate() + 1;

    return checkIfDateIsUnavailable({
      year,
      month,
      day,
    });
  },
});

// google maps
function initMap() {
  google.maps.Map.prototype.clearActiveInfoWindow = function() {
    if (this.activeInfoWindow) {
      this.activeInfoWindow.close()
    }
  };

  const position = { lat, lng };

  const mapElement = document.getElementById('map');
  const map = new google.maps.Map(mapElement, {
    center: position,
    zoom: 13,
  });

  const addMarkerWithInfoWindow = (markerPosition, infoWindowContent, display, locationType) => {
    let marker;

    if (!locationType) {
      marker = new google.maps.Marker({
        position: markerPosition,
        map,
      });
    } else {
      let url = 'data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBoZWlnaHQ9IjUxMnB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjUxMnB4Ij48cGF0aCBkPSJtMjQxIDE1aDMwdjkwaC0zMHptMCAwIiBmaWxsPSIjYThkM2Q4Ii8+PHBhdGggZD0ibTMwMSAyMC41OTc2NTZoMzB2OTBoLTMwem0wIDAiIGZpbGw9IiM4ZWJhYzUiLz48cGF0aCBkPSJtMzYxIDM5LjE5OTIxOWgzMHY5MGgtMzB6bTAgMCIgZmlsbD0iIzhlYmFjNSIvPjxwYXRoIGQ9Im0xMjEgMzkuMTk5MjE5aDMwdjkwaC0zMHptMCAwIiBmaWxsPSIjYThkM2Q4Ii8+PHBhdGggZD0ibTE4MSAyMC41OTc2NTZoMzB2OTBoLTMwem0wIDAiIGZpbGw9IiNhOGQzZDgiLz48cGF0aCBkPSJtMjU2IDE1aDE1djkwaC0xNXptMCAwIiBmaWxsPSIjOGViYWM1Ii8+PHBhdGggZD0ibTUxMiAzOTAtMzEgMTUgMzEgMTV2OTJoLTUxMnYtNjJsMzEtMTUtMzEtMTV2LTkwbDEyMS02MGgyNzBsMTIxIDYwem0wIDAiIGZpbGw9IiNhOGViZmEiLz48cGF0aCBkPSJtNTEyIDM5MC0zMSAxNSAzMSAxNXY5MmgtMjU2di0yNDJoMTM1bDEyMSA2MHptMCAwIiBmaWxsPSIjNzZlMmY4Ii8+PHBhdGggZD0ibTQ4MSAxNDUuODAwNzgxLTMwIDEuMTk5MjE5Yy0yLjY5OTIxOS02NC41LTkwLjMwMDc4MS0xMTctMTk1LTExNy0xMDcuNDAyMzQ0IDAtMTk1IDUzLjY5OTIxOS0xOTUgMTIwaC0zMGMwLTgyLjgwMDc4MSAxMDAuODAwNzgxLTE1MCAyMjUtMTUwIDEyMi42OTkyMTkgMCAyMjEuMzk4NDM4IDYzLjg5ODQzOCAyMjUgMTQ1LjgwMDc4MXptMCAwIiBmaWxsPSIjYThkM2Q4Ii8+PHBhdGggZD0ibTEyMSAzOTBoMTIwdjMwaC0xMjB6bTAgMCIgZmlsbD0iIzc2ZTJmOCIvPjxwYXRoIGQ9Im0yNzEgNDIwaDEyMHYzMGgtMTIwem0wIDAiIGZpbGw9IiMwMGMwZjEiLz48cGF0aCBkPSJtNDIxIDM5MGg5MXYzMGgtOTF6bTAgMCIgZmlsbD0iIzAwYzBmMSIvPjxwYXRoIGQ9Im0wIDQyMGg5MXYzMGgtOTF6bTAgMCIgZmlsbD0iIzc2ZTJmOCIvPjxwYXRoIGQ9Im0yNTYgMzB2LTMwYzEyMi42OTkyMTkgMCAyMjEuMzk4NDM4IDYzLjg5ODQzOCAyMjUgMTQ1LjgwMDc4MWwtMzAgMS4xOTkyMTljLTIuNjk5MjE5LTY0LjUtOTAuMzAwNzgxLTExNy0xOTUtMTE3em0wIDAiIGZpbGw9IiM4ZWJhYzUiLz48cGF0aCBkPSJtNDgxIDI1NC4zOTg0MzgtMzAgNzUuNjAxNTYyaC05MHYtNDVjMC01Ny44OTg0MzgtNDcuMTAxNTYyLTEwNS0xMDUtMTA1cy0xMDUgNDcuMTAxNTYyLTEwNSAxMDV2NDVoLTkwbC0zMC03NS42MDE1NjIgMzAtODguODAwNzgyYzQyLjMwMDc4MS01MC42OTkyMTggMTIzLTc1LjU5NzY1NiAxOTUtNzUuNTk3NjU2IDcyLjU5NzY1NiAwIDE1MyAyNS4xOTkyMTkgMTk1IDc1LjU5NzY1NnptMCAwIiBmaWxsPSIjNjg1NDRmIi8+PHBhdGggZD0ibTQ1MSAxNjUuNTk3NjU2IDMwIDg4LjgwMDc4Mi0zMCA3NS42MDE1NjJoLTkwdi00NWMwLTU3Ljg5ODQzOC00Ny4xMDE1NjItMTA1LTEwNS0xMDV2LTkwYzcyLjU5NzY1NiAwIDE1MyAyNS4xOTkyMTkgMTk1IDc1LjU5NzY1NnptMCAwIiBmaWxsPSIjNTM0MzNmIi8+PHBhdGggZD0ibTAgMGg2MXYzMzBoLTYxem0wIDAiIGZpbGw9IiM3MjVkNTciLz48cGF0aCBkPSJtNDUxIDBoNjF2MzMwaC02MXptMCAwIiBmaWxsPSIjNjg1NDRmIi8+PC9zdmc+Cg==';
      if (locationType === 'river') {} else if (locationType === 'park') {
        url = 'data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBoZWlnaHQ9IjUxMnB4IiB2aWV3Qm94PSItNjMgMCA1MTIgNTEyIiB3aWR0aD0iNTEycHgiPjxwYXRoIGQ9Im0zNDMuOTMzNTk0IDQ0Mi40NjA5MzhjLTQgLjY2MDE1Ni04LjAxMTcxOSAxLjMwMDc4MS0xMi4wMzUxNTYgMS44OTg0MzdsLTM4LjYxNzE4OC00OS45Njg3NXY1NC45OTYwOTRjLTYwLjUwNzgxMiA2LjU3MDMxMi0xMjEuODMyMDMxIDcuMTYwMTU2LTE4Mi40OTYwOTQgMS43Njk1MzEtMjIuOTU3MDMxLTIuMDQyOTY5LTQ1LjgyNDIxOC00LjkzNzUtNjguNTE5NTMxLTguNjk1MzEyLTMwLjE5OTIxOS01LjAwMzkwNy00NC40MDYyNS0zMS45NzY1NjMtMjcuMjY1NjI1LTUxLjg5ODQzOCAxNC4xMzY3MTktMTYuNDI5Njg4IDI4LjMzOTg0NC0zMy4xOTUzMTIgNDIuNjA5Mzc1LTUwLjI5Mjk2OSA4LjcyMjY1Ni0xMC40NDE0MDYgMTcuNDUzMTI1LTIxIDI2LjIwNzAzMS0zMS42OTUzMTJsMS4wMjczNDQtMS42MTMyODEgNjAuNzAzMTI1LTk1LjMzOTg0NCAxNTYuODM1OTM3IDk2Ljk2NDg0NGM4LjMyNDIxOSAxMC4xNjQwNjIgMTYuNjMyODEzIDIwLjIxODc1IDI0LjkxNzk2OSAzMC4xNDg0MzcgMTQuNzE0ODQ0IDE3LjY0MDYyNSAyOS4zNDM3NSAzNC45MTAxNTYgNDMuODk4NDM4IDUxLjgyODEyNSAxNy4xNDA2MjUgMTkuOTIxODc1IDIuOTQxNDA2IDQ2Ljg5NDUzMS0yNy4yNjU2MjUgNTEuODk4NDM4em0wIDAiIGZpbGw9IiM0ZGMxNjgiLz48cGF0aCBkPSJtMzI3LjMwMDc4MSAzMzguNzM0Mzc1Yy0yLjg0Mzc1IDEuMTI4OTA2LTUuOTQxNDA2IDEuOTkyMTg3LTkuMjczNDM3IDIuNTM5MDYzLTg0LjMxMjUgMTMuOTUzMTI0LTE3MS40ODgyODIgMTMuOTUzMTI0LTI1NS44MDA3ODIgMC0xLjU5Mzc1LS4yNjU2MjYtMy4xMzY3MTgtLjU5NzY1Ny00LjYxNzE4Ny0xLjAwMzkwNyA4LjcyMjY1Ni0xMC40NDE0MDYgMTcuNDUzMTI1LTIxIDI2LjIwNzAzMS0zMS42OTUzMTJsNjEuNzMwNDY5LTk2Ljk1MzEyNSAxNTYuODM1OTM3IDk2Ljk2NDg0NGM4LjMyNDIxOSAxMC4xNjQwNjIgMTYuNjMyODEzIDIwLjIxODc1IDI0LjkxNzk2OSAzMC4xNDg0Mzd6bTAgMCIgZmlsbD0iIzNkYWQ1MiIvPjxwYXRoIGQ9Im0zMjEuMDAzOTA2IDMwNS43MzQzNzVjLTU1LjM2MzI4MSA5LjE1NjI1LTExMS45NTMxMjUgMTIuMzA0Njg3LTE2OC4xNTYyNSA5LjQ0MTQwNmwtMTQuOTE3OTY4LTU5LjM5NDUzMS0xOS4yMDMxMjYgNTYuODk4NDM4Yy0xNy45Mjk2ODctMS42OTUzMTMtMzUuNzkyOTY4LTQuMDExNzE5LTUzLjUyMzQzNy02Ljk0NTMxMy0yNS42MDkzNzUtNC4yMzQzNzUtMzcuNjUyMzQ0LTI3LjEwNTQ2OS0yMy4xMjEwOTQtNDQgMTcuNjM2NzE5LTIwLjUxMTcxOSAzNS40Mjk2ODgtNDEuNjQ0NTMxIDUzLjMyMDMxMy02My4zODI4MTMgNC43NTM5MDYtNS43ODEyNSA5LjUxNTYyNS0xMS42MDkzNzQgMTQuMjc3MzQ0LTE3LjQ3NjU2MiAzLjM4MjgxMi00LjE1MjM0NCA2Ljc2MTcxOC04LjMzNTkzOCAxMC4xNDQ1MzEtMTIuNTQyOTY5bDYyLjA0Mjk2OS02Mi4wNDI5NjkgODQuNTE1NjI0IDYyLjA0Mjk2OWM4LjE1NjI1IDEwLjEzNjcxOSAxNi4yOTY4NzYgMjAuMTM2NzE5IDI0LjQxMDE1NyAzMC4wMTk1MzEgMTcuODk0NTMxIDIxLjczODI4MiAzNS42ODM1OTMgNDIuODcxMDk0IDUzLjMyNDIxOSA2My4zODI4MTMgMTQuNTMxMjUgMTYuODk0NTMxIDIuNDk2MDkzIDM5Ljc2NTYyNS0yMy4xMTMyODIgNDR6bTAgMCIgZmlsbD0iIzRkYzE2OCIvPjxwYXRoIGQ9Im0yNDQuMTI1IDQ5Mi43NzczNDRjLTE2LjEyNSA3LjczODI4MS0zMy41ODIwMzEgMTEuNjA1NDY4LTUxLjAyNzM0NCAxMS42MDU0NjgtMy42NjQwNjIgMC03LjMzOTg0NC0uMTcxODc0LTEwLjk5NjA5NC0uNTE1NjI0LTEzLjczMDQ2OC0xLjI4MTI1LTI3LjI5Njg3NC00Ljk3NjU2My00MC4wMjczNDMtMTEuMDg5ODQ0bDYuNzczNDM3LTM5LjAzNTE1Nmg4OC41MDM5MDZsMy4xNzk2ODggMTguMzIwMzEyem0wIDAiIGZpbGw9IiM3ZjRhMjYiLz48ZyBmaWxsPSIjM2RhZDUyIj48cGF0aCBkPSJtMjkwLjc5Mjk2OSAxOTguMzUxNTYyYy02NC40MDYyNSAxMC41NzgxMjYtMTMwLjk5MjE4OCAxMC41NzAzMTMtMTk1LjM5MDYyNSAwIDguMTI1LTkuODgyODEyIDE2LjI2OTUzMS0xOS44ODI4MTIgMjQuNDIxODc1LTMwLjAxOTUzMWw2Mi4wNDI5NjktNjIuMDQyOTY5IDg0LjUxNTYyNCA2Mi4wNDI5NjljOC4xNTYyNSAxMC4xMzY3MTkgMTYuMjk2ODc2IDIwLjEzNjcxOSAyNC40MTAxNTcgMzAuMDE5NTMxem0wIDAiLz48cGF0aCBkPSJtMTU3LjczMDQ2OSAxOTYuMzkwNjI1LTE5LjgwMDc4MSA1OS4zOTA2MjUtMTkuMjAzMTI2IDU2Ljg5ODQzOGMtMTcuOTI5Njg3LTEuNjk1MzEzLTM1Ljc5Mjk2OC00LjAxMTcxOS01My41MjM0MzctNi45NDUzMTMtMjUuNjA5Mzc1LTQuMjM0Mzc1LTM3LjY1MjM0NC0yNy4xMDU0NjktMjMuMTIxMDk0LTQ0IDE3LjYzNjcxOS0yMC41MTE3MTkgMzUuNDI5Njg4LTQxLjY0NDUzMSA1My4zMjAzMTMtNjMuMzgyODEzIDQuNzUzOTA2LTUuNzgxMjUgOS41MTU2MjUtMTEuNjA5Mzc0IDE0LjI3NzM0NC0xNy40NzY1NjJ6bTAgMCIvPjxwYXRoIGQ9Im0xMTAuNzU3ODEyIDQ1MS4xNDQ1MzFjLjAwNzgxMyAwIC4wMTk1MzIuMDExNzE5LjAyNzM0NC4wMTE3MTktMjIuOTU3MDMxLTIuMDQyOTY5LTQ1LjgyNDIxOC00LjkzNzUtNjguNTE5NTMxLTguNjk1MzEyLTMwLjE5OTIxOS01LjAwMzkwNy00NC40MDYyNS0zMS45NzY1NjMtMjcuMjY1NjI1LTUxLjg5ODQzOCAxNC4xMzY3MTktMTYuNDI5Njg4IDI4LjMzOTg0NC0zMy4xOTUzMTIgNDIuNjA5Mzc1LTUwLjI5Mjk2OSA4LjcyMjY1Ni0xMC40NDE0MDYgMTcuNDUzMTI1LTIxIDI2LjIwNzAzMS0zMS42OTUzMTJsMS4wMjczNDQtMS42MTMyODEgNTAuMDM5MDYyIDI4LjAyNzM0M3MtOTUuNDcyNjU2IDk1LjIzODI4MS0yNC4xMjUgMTE2LjE1NjI1em0wIDAiLz48L2c+PHBhdGggZD0ibTI5MS42Mjg5MDYgMTY0LjcwNzAzMWMtNDUuNzY1NjI1IDcuNTc4MTI1LTkyLjY0MDYyNSA5LjgyMDMxMy0xMzkuMDU0Njg3IDYuNzAzMTI1LS4wMjM0MzggMC0uMDQyOTY5IDAtLjA3NDIxOS0uMDExNzE4LTEuODE2NDA2LS4xMDkzNzYtMy42MzI4MTItLjIzMDQ2OS01LjQ1MzEyNS0uMzgyODEzLS4wMDc4MTMgMC0uMDA3ODEzIDAtLjAxOTUzMSAwLS42NjAxNTYtLjA0Mjk2OS0xLjMyODEyNS0uMDkzNzUtMS45ODgyODItLjE1MjM0NC0uMDExNzE4IDAtLjAxOTUzMSAwLS4wMzEyNS0uMDExNzE5LTE2LjkwNjI1LTEuMzMyMDMxLTMzLjc0MjE4Ny0zLjM4MjgxMi01MC40MjU3ODEtNi4xNDQ1MzEtMTkuNzMwNDY5LTMuMjU3ODEyLTI5LjAxMTcxOS0yMC44NzUtMTcuODEyNS0zMy44OTQ1MzEgMzAuMjMwNDY5LTM1LjE0NDUzMSA2MS4wMjczNDQtNzIuNjQ0NTMxIDkxLjk1NzAzMS0xMTIuNTE5NTMxIDUuMTI4OTA3LTYuNjIxMDk0IDEzLjY2MDE1Ny0xMC4xNzU3ODEgMjIuNDE0MDYzLTEwLjYzMjgxMyAxMC4wNjI1LS41MTk1MzEgMjAuNDI5Njg3IDMuMDE1NjI1IDI2LjMzOTg0NCAxMC42MzI4MTMgMzAuOTE3OTY5IDM5Ljg3NSA2MS43MTg3NSA3Ny4zNzUgOTEuOTQ5MjE5IDExMi41MTk1MzEgMTEuMTk5MjE4IDEzLjAxOTUzMSAxLjkxNzk2OCAzMC42MzY3MTktMTcuODAwNzgyIDMzLjg5NDUzMXptMCAwIiBmaWxsPSIjNGRjMTY4Ii8+PHBhdGggZD0ibTE5MS4xNDA2MjUgNy42NjAxNTZ2LjAwNzgxM3MtOTMuMzYzMjgxIDE1Ny4yODUxNTYtNDYuMTMyODEzIDE2My4xODM1OTNjLTE2LjkwNjI1LTEuMzMyMDMxLTMzLjc0MjE4Ny0zLjM4MjgxMi01MC40MjU3ODEtNi4xNDQ1MzEtMTkuNzMwNDY5LTMuMjU3ODEyLTI5LjAxMTcxOS0yMC44NzUtMTcuODEyNS0zMy44OTQ1MzEgMzAuMjMwNDY5LTM1LjE0NDUzMSA2MS4wMjczNDQtNzIuNjQ0NTMxIDkxLjk1NzAzMS0xMTIuNTE5NTMxIDUuMTI4OTA3LTYuNjIxMDk0IDEzLjY2MDE1Ny0xMC4xNzU3ODEgMjIuNDE0MDYzLTEwLjYzMjgxM3ptMCAwIiBmaWxsPSIjM2RhZDUyIi8+PHBhdGggZD0ibTI0NC4xMjUgNDkyLjc3NzM0NGMtMTYuMTI1IDcuNzM4MjgxLTMzLjU4MjAzMSAxMS42MDU0NjgtNTEuMDI3MzQ0IDExLjYwNTQ2OC0zLjY2NDA2MiAwLTcuMzM5ODQ0LS4xNzE4NzQtMTAuOTk2MDk0LS41MTU2MjR2LTMxLjgwNDY4OGg1OC40Mjk2ODh6bTAgMCIgZmlsbD0iIzkzNWQzNSIvPjxwYXRoIGQ9Im0xNDcuMDQ2ODc1IDE3MS4wMTU2MjVjMi4wODIwMzEuMDcwMzEzIDMuOTAyMzQ0LjIwMzEyNSA1LjQ1MzEyNS4zODI4MTMtMS44MTY0MDYtLjEwOTM3Ni0zLjYzMjgxMi0uMjMwNDY5LTUuNDUzMTI1LS4zODI4MTN6bTAgMCIgZmlsbD0iIzNkYWQ1MiIvPjxwYXRoIGQ9Im0zNzYuOTcyNjU2IDM4NS41OTc2NTZjLTIwLjI5Mjk2OC0yMy41OTc2NTYtNDAuNDk2MDk0LTQ3LjU5Mzc1LTYwLjE4NzUtNzEuNDc2NTYyIDEuODI0MjE5LS4yODkwNjMgMy42NDQ1MzItLjU3NDIxOSA1LjQ2MDkzOC0uODc1IDE2LjIyMjY1Ni0yLjY4MzU5NCAyOS4yMTA5MzctMTIuMzU5Mzc1IDMzLjg5MDYyNS0yNS4yNTc4MTMgMy44OTA2MjUtMTAuNzAzMTI1IDEuNjA5Mzc1LTIyLjA4MjAzMS02LjI0NjA5NC0zMS4yMjI2NTYtMjMuMzY3MTg3LTI3LjE2NDA2My00Ni41NTA3ODEtNTQuOTI1NzgxLTY5LjA1ODU5NC04Mi42NzE4NzUgNC4wMTU2MjUtLjU4MjAzMSA4LjAyNzM0NC0xLjIwNzAzMSAxMi4wMzUxNTctMS44NjcxODggMTMuMTIxMDkzLTIuMTcxODc0IDIzLjY0ODQzNy0xMC4wNjI1IDI3LjQ3MjY1Ni0yMC41OTM3NSAzLjIxNDg0NC04Ljg1NTQ2OCAxLjMzOTg0NC0xOC4yNTM5MDYtNS4xMzI4MTMtMjUuNzgxMjUtMTIuMTI1LTE0LjA5NzY1Ni0yNC4yNjE3MTktMjguNDg0Mzc0LTM2LjA2NjQwNi00Mi43NTc4MTItMi42ODM1OTQtMy4yNDIxODgtNy40ODA0NjktMy42OTUzMTItMTAuNzIyNjU2LTEuMDE1NjI1LTMuMjQyMTg4IDIuNjgzNTk0LTMuNjk1MzEzIDcuNDgwNDY5LTEuMDE1NjI1IDEwLjcyMjY1NiAxMS44NzEwOTQgMTQuMzUxNTYzIDI0LjA2NjQwNiAyOC44MTI1IDM2LjI1MzkwNiA0Mi45ODA0NjkgMi44NjcxODggMy4zMzIwMzEgMy42ODM1OTQgNy4wMTU2MjUgMi4zNjMyODEgMTAuNjUyMzQ0LTEuOTQ5MjE5IDUuMzYzMjgxLTcuOTQxNDA2IDkuNDg4MjgxLTE1LjY0MDYyNSAxMC43NjE3MTgtNjQuNTUwNzgxIDEwLjY4NzUtMTMwLjAxMTcxOCAxMC42ODc1LTE5NC41NjI1IDAtNy42OTkyMTgtMS4yNzM0MzctMTMuNjkxNDA2LTUuMzk4NDM3LTE1LjY0MDYyNS0xMC43NjE3MTgtMS4zMjAzMTItMy42MzY3MTktLjUwMzkwNi03LjMyMDMxMyAyLjM2MzI4MS0xMC42NTIzNDQgMzEuNzAzMTI2LTM2Ljg1OTM3NSA2Mi43MjI2NTctNzQuODIwMzEyIDkyLjIwMzEyNi0xMTIuODIwMzEyIDMuNzUzOTA2LTQuODM5ODQ0IDEwLjYxNzE4Ny03LjczMDQ2OSAxOC4zNTkzNzQtNy43MzA0NjkgNy43MzgyODIgMCAxNC42MDE1NjMgMi44OTA2MjUgMTguMzU1NDY5IDcuNzM0Mzc1IDExLjcwNzAzMSAxNS4wODk4NDQgMjMuNzUzOTA3IDMwLjMwMDc4MSAzNS44MDQ2ODggNDUuMjA3MDMxIDIuNjQ0NTMxIDMuMjY5NTMxIDcuNDQxNDA2IDMuNzgxMjUgMTAuNzEwOTM3IDEuMTMyODEzIDMuMjczNDM4LTIuNjQ0NTMyIDMuNzgxMjUtNy40NDE0MDcgMS4xMzI4MTMtMTAuNzEwOTM4LTExLjk4ODI4MS0xNC44MjgxMjUtMjMuOTY4NzUtMjkuOTU3MDMxLTM1LjYwOTM3NS00NC45NjQ4NDQtNi42MjEwOTQtOC41MzUxNTYtMTcuOTgwNDY5LTEzLjYyODkwNi0zMC4zOTQ1MzItMTMuNjI4OTA2LTEyLjQxNDA2MiAwLTIzLjc3NzM0MyA1LjA5Mzc1LTMwLjM5NDUzMSAxMy42Mjg5MDYtMjkuMzIwMzEyIDM3Ljc5Njg3NS02MC4xNzU3ODEgNzUuNTU0Njg4LTkxLjcxNDg0MyAxMTIuMjIyNjU2LTYuNDc2NTYzIDcuNTI3MzQ0LTguMzQ3NjU3IDE2LjkyNTc4Mi01LjEzMjgxMyAyNS43ODEyNSAzLjgyNDIxOSAxMC41MzEyNSAxNC4zNTE1NjMgMTguNDIxODc2IDI3LjQ3MjY1NiAyMC41OTM3NSA0LjAxMTcxOS42NjQwNjMgOC4wMjM0MzggMS4yODUxNTcgMTIuMDQyOTY5IDEuODcxMDk0LTIyLjQzNzUgMjcuNjU2MjUtNDUuNjI1IDU1LjQxNDA2My02OS4wNjY0MDYgODIuNjcxODc1LTcuODU5Mzc1IDkuMTM2NzE5LTEwLjEzMjgxMyAyMC41MTE3MTktNi4yNSAzMS4yMTQ4NDQgNC42ODc1IDEyLjkwMjM0NCAxNy42NzU3ODEgMjIuNTgyMDMxIDMzLjkwMjM0NCAyNS4yNjU2MjUgMS44MDg1OTMuMjk2ODc1IDMuNjI4OTA2LjU4NTkzOCA1LjQ0NTMxMi44NzUtMTkuNzY1NjI1IDIzLjk4NDM3NS0zOS45Njg3NSA0Ny45NzY1NjItNjAuMTc5Njg4IDcxLjQ3MjY1Ni04LjkzMzU5MyAxMC4zODY3MTktMTEuNTMxMjUgMjMuMzA0Njg4LTcuMTI4OTA2IDM1LjQ0NTMxMyA1LjM1NTQ2OSAxNC43NTM5MDYgMjAuMjY1NjI1IDI1LjgzOTg0MyAzOC45MjU3ODIgMjguOTMzNTkzIDcuOTU3MDMxIDEuMzE2NDA3IDE2LjA2MjUgMi41NDY4NzYgMjQuMDkzNzUgMy42NTYyNS4zNTE1NjIuMDUwNzgyLjcwMzEyNC4wNzQyMTkgMS4wNTA3ODEuMDc0MjE5IDMuNzQyMTg3IDAgNy4wMDc4MTItMi43NjE3MTkgNy41MzUxNTYtNi41NzQyMTkuNTc0MjE5LTQuMTY0MDYyLTIuMzM1OTM3LTguMDA3ODEyLTYuNS04LjU4NTkzNy03Ljg5ODQzNy0xLjA5Mzc1LTE1Ljg3MTA5NC0yLjMwMDc4MS0yMy42OTE0MDYtMy41OTc2NTYtMTMuMjM0Mzc1LTIuMTkxNDA3LTIzLjYxMzI4MS05LjUxMTcxOS0yNy4wOTM3NS0xOS4wOTc2NTctMi41MTE3MTktNi45MjE4NzQtLjk2NDg0NC0xNC4xNDA2MjQgNC4zNTU0NjktMjAuMzIwMzEyIDIyLjI4MTI1LTI1Ljg5ODQzOCA0NC41NDI5NjgtNTIuNDAyMzQ0IDY2LjIzMDQ2OC03OC44MzIwMzEgMTAuMzA4NTk0IDEuMzg2NzE5IDIwLjY3NTc4MiAyLjU4NTkzNyAzMS4wMDc4MTMgMy41NjI1IDMuNTExNzE5LjMzMjAzMSA2LjgwMDc4MS0xLjc5Njg3NSA3LjkzMzU5My01LjE0NDUzMWwxMC45MTQwNjMtMzIuMzM1OTM4IDguNjAxNTYzIDM0LjI1MzkwNmMuODE2NDA2IDMuMjQ2MDk0IDMuNjU2MjUgNS41NzgxMjUgNyA1Ljc1IDEzLjUyNzM0My42ODc1IDI3LjA1ODU5MyAxLjAzMTI1IDQwLjU5Mzc1IDEuMDMxMjUgMzUuNTY2NDA2IDAgNzEuMDc4MTI0LTIuMzc4OTA2IDEwNi4xNDA2MjQtNy4xMTMyODEgMjEuNTkzNzUgMjYuMzA4NTk0IDQzLjg1NTQ2OSA1Mi44MDg1OTQgNjYuMjMwNDY5IDc4LjgyODEyNSA1LjMyMDMxMyA2LjE4MzU5NCA2Ljg2NzE4OCAxMy40MDIzNDQgNC4zNTU0NjkgMjAuMzI0MjE5LTMuNDc2NTYyIDkuNTg1OTM3LTEzLjg1OTM3NSAxNi45MDIzNDMtMjcuMDg1OTM4IDE5LjA5Mzc1LTIuNjc5Njg3LjQ0MTQwNi01LjE2NDA2Mi44Mzk4NDMtNy41MTE3MTggMS4yMDcwMzFsLTM1Ljg3NS00Ni40MjE4NzVjLTEuOTkyMTg4LTIuNTc4MTI1LTUuNDAyMzQ0LTMuNjAxNTYzLTguNDg0Mzc1LTIuNTUwNzgxLTMuMDgyMDMxIDEuMDU0Njg3LTUuMTU2MjUgMy45NDkyMTgtNS4xNTYyNSA3LjIwNzAzMXY0OC4xMzY3MTljLTYzLjUxNTYyNSA2LjQxNzk2OC0xMjcuODQ3NjU3IDYuMjAzMTI1LTE5MS4zMzk4NDQtLjY0NDUzMi00LjE4MzU5NC0uNDUzMTI0LTcuOTM3NSAyLjU3NDIxOS04LjM4NjcxOSA2Ljc1MzkwNy0uNDUzMTI1IDQuMTgzNTkzIDIuNTcwMzEzIDcuOTM3NSA2Ljc1MzkwNiA4LjM5MDYyNSAxNS42ODM1OTQgMS42OTE0MDYgMzEuNDIxODc2IDIuOTY4NzUgNDcuMTc5Njg4IDMuODYzMjgxbC01LjMwNDY4OCAzMC41ODU5MzdjLS41ODIwMzEgMy4zNTU0NjkgMS4xMzI4MTMgNi42OTE0MDcgNC4yMDcwMzIgOC4xNjc5NjkgMTYuODQ3NjU2IDguMDgyMDMxIDM1LjYyODkwNiAxMi4zNTU0NjkgNTQuMzIwMzEyIDEyLjM1NTQ2OXMzNy40NzY1NjMtNC4yNzM0MzggNTQuMzI0MjE5LTEyLjM1NTQ2OWMzLjA3MDMxMy0xLjQ3NjU2MiA0Ljc4OTA2My00LjgxMjUgNC4yMDcwMzEtOC4xNjc5NjlsLTUuMzA0Njg3LTMwLjU4MjAzMWMxNS45NjQ4NDMtLjkxMDE1NiAzMS44OTg0MzctMi4yMTA5MzcgNDcuNzgxMjUtMy45MzM1OTMgMy44NjcxODctLjQyMTg3NiA2Ljc5Mjk2OS0zLjY4MzU5NCA2Ljc5Mjk2OS03LjU3MDMxM3YtMzIuNjg3NWwyNC45NzY1NjIgMzIuMzE2NDA2YzEuNjgzNTk0IDIuMTgzNTk0IDQuNDIxODc1IDMuMjgxMjUgNy4xNDg0MzggMi44NzUgMy42Nzk2ODctLjU0Njg3NSA3LjY1MjM0My0xLjE3NTc4MSAxMi4xNTYyNS0xLjkxNzk2OSAxOC42NTIzNDMtMy4wODk4NDMgMzMuNTY2NDA2LTE0LjE3NTc4MSAzOC45MTc5NjgtMjguOTI5Njg3IDQuNDA2MjUtMTIuMTQwNjI1IDEuODA4NTk0LTI1LjA2MjUtNy4xMjUtMzUuNDQ5MjE5em0tMjE4LjExNzE4Ny03Ny43NjE3MTgtMTMuNTM5MDYzLTUzLjkwNjI1Yy0uODI0MjE4LTMuMjgxMjUtMy43MDcwMzEtNS42MjEwOTQtNy4wODIwMzEtNS43NTc4MTMtMy4zODY3MTktLjEzMjgxMy02LjQ0MTQwNiAxLjk3MjY1Ni03LjUxOTUzMSA1LjE3NTc4MWwtMTcuMjY1NjI1IDUxLjE2MDE1NmMtMTUuNzM4MjgxLTEuNjEzMjgxLTMxLjUyMzQzOC0zLjcyNjU2Mi00Ny4wMDM5MDctNi4yODkwNjItMTAuODA0Njg3LTEuNzg1MTU2LTE5LjI1NzgxMi03LjY5OTIxOS0yMi4wNjY0MDYtMTUuNDMzNTk0LTIuMDExNzE4LTUuNTM5MDYyLS44MDg1OTQtMTEuMTAxNTYyIDMuNDc2NTYzLTE2LjA4NTkzNyAyNS41OTc2NTYtMjkuNzU3ODEzIDUwLjg5MDYyNS02MC4xMjEwOTQgNzUuMjM4MjgxLTkwLjI5Njg3NSAyMy4yODUxNTYgMi42OTE0MDYgNDYuNjQ0NTMxIDQuMDQyOTY4IDcwLjAwNzgxMiA0LjA0Mjk2OCAyMy4zNjMyODIgMCA0Ni43MjY1NjMtMS4zNTE1NjIgNzAuMDExNzE5LTQuMDQyOTY4IDI0LjQzMzU5NCAzMC4yODEyNSA0OS43MjI2NTcgNjAuNjQwNjI1IDc1LjIzMDQ2OSA5MC4yOTY4NzUgNC4yODkwNjIgNC45ODgyODEgNS40OTIxODggMTAuNTUwNzgxIDMuNDgwNDY5IDE2LjA4OTg0My0yLjgwODU5NCA3LjczNDM3Ni0xMS4yNjE3MTkgMTMuNjQ0NTMyLTIyLjA2MjUgMTUuNDI5Njg4LTUyLjg1NTQ2OSA4Ljc0NjA5NC0xMDYuOTYwOTM4IDExLjk3NjU2Mi0xNjAuOTA2MjUgOS42MTcxODh6bTc2Ljc1MzkwNiAxODAuNDE0MDYyYy0xMy40MTAxNTYgNS41ODU5MzgtMjcuOTkyMTg3IDguNTE5NTMxLTQyLjUwNzgxMyA4LjUxOTUzMS0xNC41MTk1MzEgMC0yOS4xMDE1NjItMi45MzM1OTMtNDIuNTExNzE4LTguNTE5NTMxbDQuNjEzMjgxLTI2LjYwMTU2MmMxMi42MjUuNTExNzE4IDI1LjI2MTcxOS43NjU2MjQgMzcuODk4NDM3Ljc2NTYyNCAxMi42MzY3MTkgMCAyNS4yNjk1MzItLjI1MzkwNiAzNy44OTQ1MzItLjc2NTYyNHptMCAwIi8+PC9zdmc+Cg==';
      } else {
        url = 'data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8cG9seWdvbiBzdHlsZT0iZmlsbDojRTU4QjI1OyIgcG9pbnRzPSI1MTEuOTk3LDM0My4wNjggNDIwLjYyMiwyNDYuMDAxIDIyOC4wMDMsNDUwLjYyIDUxMS45OTcsNDUwLjYyICIvPgo8cGF0aCBzdHlsZT0iZmlsbDojRkZDQjQ3OyIgZD0iTTIwOC4zNDcsMTYwLjQzM0wxOS4yNSwzNzIuNDkyYy0xNy4zODcsMTkuNDk4LTMuNTQ2LDUwLjM4NCwyMi41NzgsNTAuMzg0aDQwMC41NDZMMjA4LjM0NywxNjAuNDMzeiAgIi8+Cjxwb2x5bGluZSBzdHlsZT0iZmlsbDojRTU4QjI1OyIgcG9pbnRzPSIxMzYuOTI5LDM3Mi43MiAyMDguMzQ3LDE2MC40MzMgMTkuMjUsMzcyLjQ5MiAiLz4KPGNpcmNsZSBzdHlsZT0iZmlsbDojRkY5QTQ3OyIgY3g9IjM3MC45NTciIGN5PSI1OC4zMDEiIHI9IjU4LjI5OCIvPgo8cGF0aCBzdHlsZT0iZmlsbDojRTU4QjI1OyIgZD0iTTUxMS45OTcsNDAzQzMxMS4zODMsNDA5Ljg4LDE3NC4xMzIsMjYxLjk0NywwLDM1Mi44NDd2MTI3LjY5MSAgYzAsMTcuMzc0LDE0LjA4NCwzMS40NTksMzEuNDU4LDMxLjQ1OWg0NDkuMDgyYzE3LjM3MywwLDMxLjQ1OC0xNC4wODQsMzEuNDU4LTMxLjQ1OVY0MDN6Ii8+CjxwYXRoIHN0eWxlPSJmaWxsOiNGOUI3MjE7IiBkPSJNNTEyLDQwMy40OTR2NDYuMDljLTk1LjExNi0xNC45MjEtMTMwLjU4LDM2Ljg2NC0yNTIuODIyLDM2Ljg2NCAgYy0xMjIuMjUyLDAtMjM1LjIxNi05Ny4xNzUtMjM1LjIxNi0xNDQuMjI2QzE4OC42NDgsMjc1LjEzOSwzMzkuNDM2LDQwMy40OTQsNTEyLDQwMy40OTR6Ii8+CjxnPgoJPHBhdGggc3R5bGU9ImZpbGw6I0U1OEIyNTsiIGQ9Ik02Mi4zMzMsNDA1LjUwMWMtMy4xOTUsMC02LjE2Ny0yLjAzNC03LjMwOS01LjAxN2MtMS4xNzgtMy4wNzctMC4yNzctNi42MjksMi4yMTctOC43NzcgICBjMi41NjQtMi4yMDgsNi40MjUtMi40OCw5LjI3OC0wLjY2NWMyLjY5OSwxLjcxNyw0LjEyNCw1LjAwNCwzLjQ5NCw4LjE0OEM2OS4yODgsNDAyLjgwNSw2Ni4wMzEsNDA1LjUwMSw2Mi4zMzMsNDA1LjUwMXoiLz4KCTxwYXRoIHN0eWxlPSJmaWxsOiNFNThCMjU7IiBkPSJNODMuMjMxLDM5My40ODVjLTcuMTI2LDAtMTAuNDg3LTkuMTY2LTUuMDg5LTEzLjc5NGMyLjU2OS0yLjIwNCw2LjQxOC0yLjQ4Myw5LjI3NC0wLjY2NSAgIGMyLjcwNCwxLjcyLDQuMTI1LDQuOTk3LDMuNDk0LDguMTQ4QzkwLjE4NiwzOTAuNzksODYuOTMzLDM5My40ODUsODMuMjMxLDM5My40ODV6Ii8+Cgk8cGF0aCBzdHlsZT0iZmlsbDojRTU4QjI1OyIgZD0iTTYyLjMzMywzNzguMzM0Yy0zLjE5NSwwLTYuMTY3LTIuMDM0LTcuMzA5LTUuMDE3Yy0xLjE3OC0zLjA3Ny0wLjI3Ny02LjYyOSwyLjIxNy04Ljc3NyAgIGMyLjU2NC0yLjIwOCw2LjQyNS0yLjQ3OSw5LjI3OC0wLjY2NWMyLjY5OSwxLjcxNyw0LjEyNCw1LjAwNCwzLjQ5NCw4LjE0OEM2OS4yODgsMzc1LjYzOCw2Ni4wMzEsMzc4LjMzNCw2Mi4zMzMsMzc4LjMzNHoiLz4KPC9nPgo8cGF0aCBzdHlsZT0iZmlsbDojRkZDQjQ3OyIgZD0iTTQ4MS4zMTQsNDY3Ljc1NmMtMy4zNjMsMC02LjM2My0yLjIwOC03LjQzMy01LjM3NmMtMS4wNDQtMy4wOTEsMC4wNDQtNi42MzUsMi42MTYtOC42MzEgIGM1LjY1LTQuMzgyLDEzLjk2MSwwLjgsMTIuNDgzLDcuNzgzQzQ4OC4yMjEsNDY1LjEyLDQ4NC45ODksNDY3Ljc1Niw0ODEuMzE0LDQ2Ny43NTZ6Ii8+CjxwYXRoIHN0eWxlPSJmaWxsOiNFNThCMjU7IiBkPSJNNDY5LjI5Nyw0NDYuODU4Yy0zLjQwOCwwLTYuNTEyLTIuMjkyLTcuNDk2LTUuNTU4Yy0wLjk1LTMuMTU0LDAuMjEzLTYuNjg3LDIuODk0LTguNjE0ICBjNS42MzMtNC4wNDgsMTMuNTk3LDAuOTcsMTIuMjk4LDcuNzlDNDc2LjI5OCw0NDQuMTMsNDczLjAyNyw0NDYuODU4LDQ2OS4yOTcsNDQ2Ljg1OHoiLz4KPHBhdGggc3R5bGU9ImZpbGw6I0ZGQ0I0NzsiIGQ9Ik00NTQuMTQ2LDQ2Ny43NjZjLTYuODI0LDAtMTAuMzY4LTguNTYzLTUuNTM4LTEzLjM4NWMyLjYyMy0yLjYxOCw2LjgwMy0zLDkuODg1LTAuOTcyICBjMi42MjIsMS43MjYsMy45NDQsNC45NzYsMy4zMzMsOC4wNDZDNDYxLjEwNSw0NjUuMDcyLDQ1Ny44NCw0NjcuNzY2LDQ1NC4xNDYsNDY3Ljc2NnoiLz4KPHBhdGggc3R5bGU9ImZpbGw6I0U1OEIyNTsiIGQ9Ik0xMDguMzA4LDQzOS4wNDJjLTMuMzM4LDAtNi4zOTYtMi4yMDYtNy40MzUtNS4zNzZjLTEuMDQ5LTMuMTk5LDAuMDk2LTYuODI0LDIuODM1LTguNzk2ICBjNS43ODYtNC4xNjQsMTMuOTYsMS4yNjMsMTIuMTk5LDguMjQ1QzExNS4wMzgsNDM2LjU1MywxMTEuODUzLDQzOS4wNDIsMTA4LjMwOCw0MzkuMDQyeiIvPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K'
      }
      marker = new google.maps.Marker({
        position: markerPosition,
        map,
        icon: {
          url,
          scaledSize: new google.maps.Size(31, 44),
        },
      });
    }

    const infoWindow = new google.maps.InfoWindow({
      content: infoWindowContent,
    });

    if (display) {
      infoWindow.open(map, marker);
      google.maps.Map.prototype.activeInfoWindow = infoWindow;
    }

    marker.addListener('click', function() {
      google.maps.Map.prototype.clearActiveInfoWindow();
      infoWindow.open(map, marker);
      google.maps.Map.prototype.activeInfoWindow = infoWindow;
    });
  }

  addMarkerWithInfoWindow(position, address, true);

  landmarks.map(landmark => addMarkerWithInfoWindow({ lat: landmark.lat, lng: landmark.lng }, landmark.title, false, landmark.locationType));
}
